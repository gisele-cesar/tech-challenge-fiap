apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: fiap-fase-2-hpa
  labels: 
     app: fiap-fase-2
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: fiap-fase-2
  minReplicas: 1
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 30
  #   - type: Pods
  #     pods:
  #       metric:
  #         name: packets-per-second
  #       target:
  #         type: AverageValue
  #         averageValue: 1k
  #   - type: Object
  #     object:
  #       metric:
  #         name: requests-per-second
  #       describedObject:
  #         apiVersion: networking.k8s.io/v1
  #         kind: Ingress
  #         name: main-route
  #       target:
  #         type: Value
  #         value: 10k
  # status:
  #   observedGeneration: 1
  #   lastScaleTime: <some-time>
  #   currentReplicas: 1
  #   desiredReplicas: 1
  #   currentMetrics:
  #   - type: Resource
  #     resource:
  #       name: cpu
  #     current:
  #       averageUtilization: 0
  #       averageValue: 0
  #   - type: Object
  #     object:
  #       metric:
  #         name: requests-per-second
  #       describedObject:
  #         apiVersion: networking.k8s.io/v1
  #         kind: Ingress
  #         name: main-route
  #       current:
  #         value: 10k